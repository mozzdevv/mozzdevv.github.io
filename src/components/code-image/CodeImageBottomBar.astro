---
import { darkThemes, lightThemes } from "./scripts/themes";
import { languages } from "./scripts/languages";

// UI Components
import Button from "@/components/ui/button/Button.astro";
import Switch from "@/components/ui/switch/Switch.astro";
import Select from "@/components/ui/select/Select.astro";
import DropdownMenu from "@/components/ui/dropdown-menu/DropdownMenu.astro";
import DropdownMenuTrigger from "@/components/ui/dropdown-menu/DropdownMenuTrigger.astro";
import DropdownMenuContent from "@/components/ui/dropdown-menu/DropdownMenuContent.astro";
import DropdownMenuItem from "@/components/ui/dropdown-menu/DropdownMenuItem.astro";
import DropdownMenuSeparator from "@/components/ui/dropdown-menu/DropdownMenuSeparator.astro";

// Icons
import Download from "@lucide/astro/icons/download";
import Copy from "@lucide/astro/icons/copy";
import Link from "@lucide/astro/icons/link";
import Image from "@lucide/astro/icons/image";
---

<div class="shrink-0 border-t border-border" id="code-image-bottom-bar">
    <div class="max-w-[1400px] mx-auto px-6 py-2.5">
    <div class="flex items-center justify-between gap-8">
      <!-- Left: Theme selector -->
      <div class="flex items-center gap-3 min-w-0">
        <label
          for="theme-select"
          class="text-xs text-muted-foreground whitespace-nowrap">Theme</label
        >
        <Select id="theme-select" class="w-44 h-7! py-0! px-2! text-xs">
          <optgroup label="Dark">
            {darkThemes.map((t) => <option value={t.id}>{t.name}</option>)}
          </optgroup>
          <optgroup label="Light">
            {
              lightThemes.map((t) => (
                <option value={t.id} selected={t.id === "Astro Light"}>
                  {t.name}
                </option>
              ))
            }
          </optgroup>
        </Select>
      </div>
      <!-- Divider -->
      <div class="h-5 w-px bg-border"></div>
      <!-- Center: Controls -->
      <div class="flex items-center gap-6">
        <!-- Dark mode -->
        <div class="flex items-center gap-2.5">
          <label
            for="darkmode-toggle"
            class="text-xs text-muted-foreground whitespace-nowrap"
            >Dark mode</label
          >
          <Switch id="darkmode-toggle" checked={false} />
        </div>

        <!-- Divider -->
        <div class="h-5 w-px bg-border"></div>

        <!-- Line numbers -->
        <div class="flex items-center gap-2.5">
          <label
            for="linenumbers-toggle"
            class="text-xs text-muted-foreground whitespace-nowrap"
            >Line numbers</label
          >
          <Switch id="linenumbers-toggle" checked={true} />
        </div>

        <!-- Divider -->
        <div class="h-5 w-px bg-border"></div>

        <!-- Padding -->
        <div class="flex items-center gap-2.5">
          <span class="text-xs text-muted-foreground whitespace-nowrap"
            >Padding</span
          >
          <div class="flex items-center gap-1.5">
            {
              [16, 32, 64, 128].map((p) => (
                <Button
                  variant="ghost"
                  size="xs"
                  data-padding={p}
                  class={p === 64 ? "border-primary" : ""}
                >
                  {p}
                </Button>
              ))
            }
          </div>
        </div>

        <!-- Divider -->
        <div class="h-5 w-px bg-border"></div>

        <!-- Language -->
        <div class="flex items-center gap-2.5">
          <label
            for="language-select"
            class="text-xs text-muted-foreground whitespace-nowrap"
            >Language</label
          >
          <Select id="language-select" class="w-24 h-7! py-0! px-2! text-xs">
            <option value="auto">Auto</option>
            {languages.map((l) => <option value={l.id}>{l.name}</option>)}
          </Select>
        </div>
      </div>
      <!-- Divider -->
      <div class="h-5 w-px bg-border"></div>
      <!-- Right: Format + Export -->
      <div class="flex items-center gap-2">
        <Button variant="ghost" size="sm" id="format-code-btn">
          Format
        </Button>
        <DropdownMenu>
          <DropdownMenuTrigger>
            <Button variant="default" size="sm"> Export </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent
            align="end"
            class="w-40 bottom-full mb-2 top-auto"
          >
            <DropdownMenuItem id="export-copy-image">
              <Copy size={14} />
              <span class="ml-2">Copy Image</span>
            </DropdownMenuItem>
            <DropdownMenuItem id="export-copy-url">
              <Link size={14} />
              <span class="ml-2">Copy URL</span>
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem id="export-png">
              <Download size={14} />
              <span class="ml-2">Save PNG</span>
            </DropdownMenuItem>
            <DropdownMenuItem id="export-svg">
              <Image size={14} />
              <span class="ml-2">Save SVG</span>
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      </div>
    </div>
  </div>
</div>
