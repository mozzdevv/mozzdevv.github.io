---
import { cn } from '@/utils/cn';
import type { HTMLAttributes } from 'astro/types';
import Check from '@lucide/astro/icons/check';

export interface Props extends HTMLAttributes<'input'> {
  id?: string;
  name?: string;
  checked?: boolean;
  disabled?: boolean;
  required?: boolean;
  value?: string;
}

const {
  id,
  name,
  checked = false,
  disabled = false,
  required = false,
  value,
  class: className,
  ...props
} = Astro.props;

const inputClasses = cn(
  'peer size-4 shrink-0 appearance-none rounded-sm border border-border bg-background',
  'cursor-pointer transition-colors',
  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background',
  'disabled:cursor-not-allowed disabled:opacity-50',
  'checked:bg-primary checked:border-primary',
  className
);
---

<span class="relative inline-flex items-center justify-center">
  <input
    type="checkbox"
    id={id}
    name={name}
    checked={checked}
    disabled={disabled}
    required={required}
    value={value}
    class={inputClasses}
    {...props}
  />
  <Check
    class="pointer-events-none absolute size-3 text-primary-foreground opacity-0 peer-checked:opacity-100 transition-opacity"
    strokeWidth={3}
  />
</span>
