---
import { cn } from "@/utils/cn";
import type { HTMLAttributes } from "astro/types";
import Link2 from "@lucide/astro/icons/link-2";

export interface Props extends HTMLAttributes<"button"> {
  href?: string;
}

const { href, class: className, ...props } = Astro.props;

const classes = cn(
  "group relative inline-flex size-8 shrink-0 items-center justify-center rounded-full text-sm font-medium transition-colors",
  "bg-muted text-muted-foreground",
  "[[data-state=completed]_&]:bg-primary [[data-state=completed]_&]:text-primary-foreground",
  "[[data-state=active]_&]:bg-primary [[data-state=active]_&]:text-primary-foreground",
  "[[data-state=upcoming]_&]:bg-muted [[data-state=upcoming]_&]:text-muted-foreground",
  "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
  className,
);
---

{
  href ? (
    <a href={href} class={classes} data-stepper-trigger {...props}>
      <span class="transition-opacity group-hover:opacity-0">
        <slot />
      </span>
      <Link2 class="absolute size-4 opacity-0 transition-opacity group-hover:opacity-100" />
    </a>
  ) : (
    <button type="button" class={classes} data-stepper-trigger {...props}>
      <slot />
    </button>
  )
}
