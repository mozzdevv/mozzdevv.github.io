---
import { cn } from "@/utils/cn";
import type { HTMLAttributes } from "astro/types";

export interface Props extends HTMLAttributes<"label"> {
  id?: string;
  value: string;
  disabled?: boolean;
  checked?: boolean;
}

const {
  id,
  value,
  disabled = false,
  checked = false,
  class: className,
  ...props
} = Astro.props;

const wrapperClasses = cn(
  "aspect-square size-4 shrink-0 rounded-full border border-input cursor-pointer",
  "ring-offset-background transition-colors",
  "focus-within:outline-none focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",
  "data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",
  "has-[:checked]:border-primary",
  className
);
---

<label
  class={wrapperClasses}
  data-radio-group-item
  data-disabled={disabled ? "true" : undefined}
  {...props}
>
  <input
    type="radio"
    id={id}
    value={value}
    checked={checked}
    disabled={disabled}
    class="peer sr-only"
  />
  <span
    class={cn(
      "flex items-center justify-center",
      "size-full rounded-full",
      "after:content-[''] after:block after:size-2 after:rounded-full after:bg-primary",
      "after:scale-0 after:transition-transform",
      "peer-checked:after:scale-100"
    )}
  ></span>
</label>
