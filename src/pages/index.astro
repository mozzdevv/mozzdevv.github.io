---
import BaseLayout from '@/layouts/BaseLayout.astro';
import HeroSection from '@/components/sections/HeroSection.astro';
import AboutSection from '@/components/sections/AboutSection.astro';
import SkillsSection from '@/components/sections/SkillsSection.astro';
import ExperienceSection from '@/components/sections/ExperienceSection.astro';
import ProjectsSection from '@/components/sections/ProjectsSection.astro';
import TestimonialsSection from '@/components/sections/TestimonialsSection.astro';
import ContactSection from '@/components/sections/ContactSection.astro';
import BlogSection from '@/components/sections/BlogSection.astro';
import pageConfig from '@/data/sections/page-config.json';

// Map section IDs to components
const sectionComponents: Record<string, any> = {
  hero: HeroSection,
  about: AboutSection,
  skills: SkillsSection,
  experience: ExperienceSection,
  projects: ProjectsSection,
  testimonials: TestimonialsSection,
  blog: BlogSection,
  contact: ContactSection,
};

// Filter and sort enabled sections
const enabledSections = pageConfig.sections
  .filter((s: { enabled: boolean }) => s.enabled)
  .sort((a: { order: number }, b: { order: number }) => a.order - b.order);
---

<BaseLayout showNavigation={true} showFooter={true}>
  {enabledSections.map((section: { id: string }) => {
    const Component = sectionComponents[section.id];
    return Component ? <Component /> : null;
  })}
</BaseLayout>
