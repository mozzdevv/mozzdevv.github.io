{
  "name": "dialog",
  "description": "A modal dialog that appears on top of the page",
  "category": "disclosure",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "focus-trap"
  ],
  "files": [
    {
      "name": "Dialog.astro",
      "path": "dialog/Dialog.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst {\n  class: className,\n  ...props\n} = Astro.props;\n---\n\n<div data-dialog class={className} {...props}>\n  <slot />\n</div>\n\n<script>\n  import { trapFocus, generateId } from '@/utils/focus-trap';\n\n  function initDialogs() {\n    document.querySelectorAll('[data-dialog]').forEach((dialog) => {\n      if (dialog.hasAttribute('data-initialized')) return;\n      dialog.setAttribute('data-initialized', 'true');\n\n      const trigger = dialog.querySelector('[data-dialog-trigger]') as HTMLElement;\n      const overlay = dialog.querySelector('[data-dialog-overlay]') as HTMLElement;\n      const content = dialog.querySelector('[data-dialog-content]') as HTMLElement;\n      const closeButtons = dialog.querySelectorAll('[data-dialog-close]');\n      const title = dialog.querySelector('[data-dialog-title]') as HTMLElement;\n      const description = dialog.querySelector('[data-dialog-description]') as HTMLElement;\n\n      if (!trigger) return;\n\n      // Generate IDs for ARIA relationships\n      if (title && !title.id) {\n        title.id = generateId('dialog-title');\n      }\n      if (description && !description.id) {\n        description.id = generateId('dialog-desc');\n      }\n\n      // Set ARIA attributes on content\n      if (content) {\n        if (title?.id) content.setAttribute('aria-labelledby', title.id);\n        if (description?.id) content.setAttribute('aria-describedby', description.id);\n      }\n\n      let cleanupFocusTrap: (() => void) | null = null;\n\n      // Open dialog\n      trigger.addEventListener('click', () => {\n        if (overlay) overlay.hidden = false;\n        if (content) {\n          content.hidden = false;\n          // Set up focus trap\n          cleanupFocusTrap = trapFocus(content);\n        }\n      });\n\n      // Close dialog\n      const closeDialog = () => {\n        if (overlay) overlay.hidden = true;\n        if (content) content.hidden = true;\n        // Clean up focus trap\n        cleanupFocusTrap?.();\n        cleanupFocusTrap = null;\n        // Return focus to trigger\n        trigger?.focus();\n      };\n\n      closeButtons.forEach((btn) => {\n        btn.addEventListener('click', closeDialog);\n      });\n\n      overlay?.addEventListener('click', (e) => {\n        if (e.target === overlay) closeDialog();\n      });\n\n      // Close on Escape\n      const handleEscape = (e: KeyboardEvent) => {\n        if (e.key === 'Escape' && overlay && !overlay.hidden) {\n          closeDialog();\n        }\n      };\n\n      document.addEventListener('keydown', handleEscape);\n    });\n  }\n\n  initDialogs();\n  document.addEventListener('astro:page-load', initDialogs);\n</script>\n"
    },
    {
      "name": "DialogContent.astro",
      "path": "dialog/DialogContent.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\nimport X from \"@lucide/astro/icons/x\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200\",\n  \"sm:rounded-lg\",\n  className\n);\n---\n\n<div\n  class={classes}\n  data-dialog-content\n  hidden\n  role=\"dialog\"\n  aria-modal=\"true\"\n  {...props}\n>\n  <slot />\n  <button\n    type=\"button\"\n    class=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\"\n    data-dialog-close\n  >\n    <X size={16} />\n    <span class=\"sr-only\">Close</span>\n  </button>\n</div>\n"
    },
    {
      "name": "DialogDescription.astro",
      "path": "dialog/DialogDescription.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"p\"> {\n  id?: string;\n}\n\nconst { class: className, id, ...props } = Astro.props;\n\nconst classes = cn(\"text-sm text-muted-foreground\", className);\n---\n\n<div class={classes} data-dialog-description id={id} {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "DialogFooter.astro",
      "path": "dialog/DialogFooter.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className);\n---\n\n<div class={classes} {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "DialogHeader.astro",
      "path": "dialog/DialogHeader.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('flex flex-col space-y-1.5 text-center sm:text-left', className);\n---\n\n<div class={classes} {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "DialogOverlay.astro",
      "path": "dialog/DialogOverlay.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"fixed inset-0 z-50 bg-overlay/10 backdrop-blur-sm transition-opacity\",\n  className,\n);\n---\n\n<div class={classes} data-dialog-overlay hidden {...props}></div>\n"
    },
    {
      "name": "DialogTitle.astro",
      "path": "dialog/DialogTitle.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'h2'> {\n  id?: string;\n}\n\nconst { class: className, id, ...props } = Astro.props;\n\nconst classes = cn('text-lg font-semibold leading-none tracking-tight', className);\n---\n\n<h2 class={classes} data-dialog-title id={id} {...props}>\n  <slot />\n</h2>\n"
    },
    {
      "name": "DialogTrigger.astro",
      "path": "dialog/DialogTrigger.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'span'> {}\n\nconst {\n  class: className,\n  ...props\n} = Astro.props;\n---\n\n<span \n  data-dialog-trigger\n  class={cn('inline-block cursor-pointer', className)} \n  role=\"button\"\n  tabindex=\"0\"\n  {...props}\n>\n  <slot />\n</span>\n\n<script>\n  function initDialogTriggers() {\n    document.querySelectorAll('[data-dialog-trigger]').forEach((trigger) => {\n      if (trigger.hasAttribute('data-trigger-initialized')) return;\n      trigger.setAttribute('data-trigger-initialized', 'true');\n\n      trigger.addEventListener('keydown', (e) => {\n        const event = e as KeyboardEvent;\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          trigger.dispatchEvent(new MouseEvent('click', { bubbles: true }));\n        }\n      });\n    });\n  }\n\n  initDialogTriggers();\n  document.addEventListener('astro:page-load', initDialogTriggers);\n</script>\n"
    }
  ]
}
