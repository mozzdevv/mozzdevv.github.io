{
  "name": "file-upload",
  "description": "A file upload component with drag and drop",
  "category": "form",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "name": "FileUpload.astro",
      "path": "file-upload/FileUpload.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  multiple?: boolean;\n  accept?: string;\n  maxSize?: number;\n  disabled?: boolean;\n}\n\nconst { \n  multiple = false, \n  accept,\n  maxSize,\n  disabled = false,\n  class: className, \n  ...props \n} = Astro.props;\n\nconst classes = cn(\n  'file-upload',\n  className\n);\n---\n\n<div\n  class={classes}\n  data-file-upload\n  data-multiple={multiple ? 'true' : undefined}\n  data-accept={accept}\n  data-max-size={maxSize}\n  data-disabled={disabled ? 'true' : undefined}\n  {...props}\n>\n  <slot />\n</div>\n\n<script>\n  function initFileUploads() {\n    document.querySelectorAll('[data-file-upload]').forEach((upload) => {\n      if (upload.hasAttribute('data-initialized')) return;\n      upload.setAttribute('data-initialized', 'true');\n\n      const input = upload.querySelector('[data-file-upload-input]') as HTMLInputElement;\n      const trigger = upload.querySelector('[data-file-upload-trigger]');\n      const dropzone = upload.querySelector('[data-file-upload-dropzone]');\n      const preview = upload.querySelector('[data-file-upload-preview]');\n      const isDisabled = upload.getAttribute('data-disabled') === 'true';\n\n      if (!input || isDisabled) return;\n\n      // Click to open file picker\n      if (trigger) {\n        trigger.addEventListener('click', () => input.click());\n      }\n\n      if (dropzone) {\n        dropzone.addEventListener('click', () => input.click());\n\n        // Drag and drop\n        dropzone.addEventListener('dragover', (e) => {\n          e.preventDefault();\n          dropzone.setAttribute('data-drag-over', 'true');\n        });\n\n        dropzone.addEventListener('dragleave', () => {\n          dropzone.removeAttribute('data-drag-over');\n        });\n\n        dropzone.addEventListener('drop', (e) => {\n          e.preventDefault();\n          dropzone.removeAttribute('data-drag-over');\n\n          const dataTransfer = (e as DragEvent).dataTransfer;\n          if (dataTransfer?.files) {\n            input.files = dataTransfer.files;\n            input.dispatchEvent(new Event('change', { bubbles: true }));\n          }\n        });\n      }\n\n      // Handle file selection\n      input.addEventListener('change', () => {\n        if (!preview) return;\n\n        const files = input.files;\n        if (!files || files.length === 0) {\n          preview.innerHTML = '';\n          return;\n        }\n\n        // Clear existing preview\n        preview.innerHTML = '';\n\n        Array.from(files).forEach((file) => {\n          const item = document.createElement('div');\n          item.className = 'flex items-center gap-2 rounded-md border bg-muted/50 px-3 py-2 text-sm';\n          \n          const icon = document.createElement('span');\n          icon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"size-4\"><path d=\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\"/><path d=\"M14 2v4a2 2 0 0 0 2 2h4\"/></svg>`;\n          \n          const name = document.createElement('span');\n          name.className = 'flex-1 truncate';\n          name.textContent = file.name;\n          \n          const size = document.createElement('span');\n          size.className = 'text-muted-foreground text-xs';\n          size.textContent = formatFileSize(file.size);\n\n          const remove = document.createElement('button');\n          remove.type = 'button';\n          remove.className = 'text-muted-foreground hover:text-foreground';\n          remove.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"size-4\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg>`;\n          remove.addEventListener('click', (e) => {\n            e.stopPropagation();\n            item.remove();\n            // Clear input if no more items\n            if (preview.children.length === 0) {\n              input.value = '';\n            }\n          });\n          \n          item.appendChild(icon);\n          item.appendChild(name);\n          item.appendChild(size);\n          item.appendChild(remove);\n          preview.appendChild(item);\n        });\n      });\n    });\n  }\n\n  function formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n\n  initFileUploads();\n  document.addEventListener('astro:page-load', initFileUploads);\n</script>\n"
    },
    {
      "name": "FileUploadDropzone.astro",
      "path": "file-upload/FileUploadDropzone.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\nimport Upload from \"@lucide/astro/icons/upload\";\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'flex min-h-32 cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border border-dashed border-muted-foreground/25 px-6 py-8 text-center transition-colors',\n  'hover:border-muted-foreground/50 hover:bg-muted/50',\n  'data-[drag-over=true]:border-primary data-[drag-over=true]:bg-primary/5',\n  className\n);\n---\n\n<div class={classes} data-file-upload-dropzone {...props}>\n  <slot>\n    <Upload class=\"size-6 text-muted-foreground\" />\n    <div class=\"text-sm text-muted-foreground\">\n      <span class=\"font-medium text-foreground\">Click to upload</span> or drag and drop\n    </div>\n    <p class=\"text-xs text-muted-foreground\">SVG, PNG, JPG or GIF</p>\n  </slot>\n</div>\n"
    },
    {
      "name": "FileUploadInput.astro",
      "path": "file-upload/FileUploadInput.astro",
      "content": "---\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'input'> {\n  name?: string;\n  multiple?: boolean;\n  accept?: string;\n}\n\nconst { name, multiple = false, accept, ...props } = Astro.props;\n---\n\n<input\n  type=\"file\"\n  name={name}\n  multiple={multiple}\n  accept={accept}\n  class=\"sr-only\"\n  data-file-upload-input\n  {...props}\n/>\n"
    },
    {
      "name": "FileUploadPreview.astro",
      "path": "file-upload/FileUploadPreview.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'flex flex-col gap-2',\n  className\n);\n---\n\n<div class={classes} data-file-upload-preview {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "FileUploadTrigger.astro",
      "path": "file-upload/FileUploadTrigger.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'button'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors',\n  'hover:bg-primary/90',\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n  'disabled:pointer-events-none disabled:opacity-50',\n  className\n);\n---\n\n<button\n  type=\"button\"\n  class={classes}\n  data-file-upload-trigger\n  {...props}\n>\n  <slot>Choose File</slot>\n</button>\n"
    }
  ]
}
