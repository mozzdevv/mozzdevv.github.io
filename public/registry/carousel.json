{
  "name": "carousel",
  "description": "A carousel component built with Keen Slider",
  "category": "display",
  "dependencies": [
    "keen-slider"
  ],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "name": "Carousel.astro",
      "path": "carousel/Carousel.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  loop?: boolean;\n  autoplay?: boolean;\n  autoplayDelay?: number;\n  pauseOnHover?: boolean;\n  slidesPerView?: number | 'auto';\n  spacing?: number;\n  orientation?: 'horizontal' | 'vertical';\n}\n\nconst {\n  loop = false,\n  autoplay = false,\n  autoplayDelay = 4000,\n  pauseOnHover = true,\n  slidesPerView = 1,\n  spacing = 16,\n  orientation = 'horizontal',\n  class: className,\n  ...props\n} = Astro.props;\n\nconst classes = cn('relative', className);\n---\n\n<div\n  class={classes}\n  data-carousel\n  data-loop={loop ? 'true' : undefined}\n  data-autoplay={autoplay ? 'true' : undefined}\n  data-autoplay-delay={autoplayDelay}\n  data-pause-on-hover={pauseOnHover ? 'true' : undefined}\n  data-slides-per-view={slidesPerView}\n  data-spacing={spacing}\n  data-orientation={orientation}\n  {...props}\n>\n  <slot />\n</div>\n\n<script>\n  import KeenSlider from 'keen-slider';\n\n  function initCarousels() {\n    document.querySelectorAll('[data-carousel]').forEach((carousel) => {\n      if (carousel.hasAttribute('data-carousel-initialized')) return;\n      carousel.setAttribute('data-carousel-initialized', 'true');\n\n      const content = carousel.querySelector('[data-carousel-content]') as HTMLElement;\n      if (!content) return;\n\n      const loop = carousel.getAttribute('data-loop') === 'true';\n      const autoplay = carousel.getAttribute('data-autoplay') === 'true';\n      const autoplayDelay = parseInt(carousel.getAttribute('data-autoplay-delay') || '4000');\n      const pauseOnHover = carousel.getAttribute('data-pause-on-hover') === 'true';\n      const slidesPerView = carousel.getAttribute('data-slides-per-view');\n      const spacing = parseInt(carousel.getAttribute('data-spacing') || '16');\n      const orientation = carousel.getAttribute('data-orientation') as 'horizontal' | 'vertical';\n\n      const perView = slidesPerView === 'auto' ? 'auto' : parseInt(slidesPerView || '1');\n\n      let autoplayInterval: ReturnType<typeof setInterval> | null = null;\n\n      const slider = new KeenSlider(content, {\n        loop,\n        mode: 'snap',\n        slides: {\n          perView,\n          spacing,\n        },\n        vertical: orientation === 'vertical',\n        created(s) {\n          // Update dots\n          updateDots(s.track.details.rel);\n          updateArrows(s);\n\n          // Start autoplay if enabled\n          if (autoplay) {\n            startAutoplay();\n          }\n        },\n        slideChanged(s) {\n          updateDots(s.track.details.rel);\n          updateArrows(s);\n        },\n      });\n\n      function startAutoplay() {\n        if (autoplayInterval) clearInterval(autoplayInterval);\n        autoplayInterval = setInterval(() => {\n          slider.next();\n        }, autoplayDelay);\n      }\n\n      function stopAutoplay() {\n        if (autoplayInterval) {\n          clearInterval(autoplayInterval);\n          autoplayInterval = null;\n        }\n      }\n\n      // Pause on hover\n      if (autoplay && pauseOnHover) {\n        content.addEventListener('mouseenter', stopAutoplay);\n        content.addEventListener('mouseleave', startAutoplay);\n      }\n\n      function updateDots(currentSlide: number) {\n        const dots = carousel.querySelectorAll('[data-carousel-dot]');\n        dots.forEach((dot, index) => {\n          if (index === currentSlide) {\n            dot.setAttribute('data-active', 'true');\n          } else {\n            dot.removeAttribute('data-active');\n          }\n        });\n      }\n\n      function updateArrows(s: typeof slider) {\n        const prevBtn = carousel.querySelector('[data-carousel-prev]');\n        const nextBtn = carousel.querySelector('[data-carousel-next]');\n        \n        if (!loop) {\n          if (prevBtn) {\n            if (s.track.details.rel === 0) {\n              prevBtn.setAttribute('disabled', 'true');\n            } else {\n              prevBtn.removeAttribute('disabled');\n            }\n          }\n          if (nextBtn) {\n            if (s.track.details.rel === s.track.details.maxIdx) {\n              nextBtn.setAttribute('disabled', 'true');\n            } else {\n              nextBtn.removeAttribute('disabled');\n            }\n          }\n        }\n      }\n\n      // Previous button\n      const prevBtn = carousel.querySelector('[data-carousel-prev]');\n      prevBtn?.addEventListener('click', () => slider.prev());\n\n      // Next button\n      const nextBtn = carousel.querySelector('[data-carousel-next]');\n      nextBtn?.addEventListener('click', () => slider.next());\n\n      // Dots navigation\n      const dots = carousel.querySelectorAll('[data-carousel-dot]');\n      dots.forEach((dot, index) => {\n        dot.addEventListener('click', () => slider.moveToIdx(index));\n      });\n\n      // Store slider instance for cleanup\n      (carousel as any).__keenSlider = slider;\n    });\n  }\n\n  initCarousels();\n  document.addEventListener('astro:page-load', initCarousels);\n</script>\n\n<style is:global>\n  @import 'keen-slider/keen-slider.min.css';\n</style>\n"
    },
    {
      "name": "CarouselContent.astro",
      "path": "carousel/CarouselContent.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('keen-slider', className);\n---\n\n<div class={classes} data-carousel-content {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "CarouselDots.astro",
      "path": "carousel/CarouselDots.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  count: number;\n}\n\nconst { count, class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'flex items-center justify-center gap-1.5 mt-4',\n  className\n);\n---\n\n<div class={classes} data-carousel-dots {...props}>\n  {Array.from({ length: count }).map((_, index) => (\n    <button\n      type=\"button\"\n      class=\"size-2 rounded-full bg-muted transition-colors data-[active]:bg-primary\"\n      data-carousel-dot\n      data-index={index}\n      aria-label={`Go to slide ${index + 1}`}\n    />\n  ))}\n</div>\n"
    },
    {
      "name": "CarouselItem.astro",
      "path": "carousel/CarouselItem.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('keen-slider__slide', className);\n---\n\n<div class={classes} data-carousel-item {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "CarouselNext.astro",
      "path": "carousel/CarouselNext.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\nimport ChevronRight from '@lucide/astro/icons/chevron-right';\n\nexport interface Props extends HTMLAttributes<'button'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'absolute right-2 top-1/2 -translate-y-1/2 z-10',\n  'inline-flex size-8 items-center justify-center rounded-full',\n  'bg-background/80 backdrop-blur-sm border shadow-sm',\n  'hover:bg-accent hover:text-accent-foreground',\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring',\n  'disabled:pointer-events-none disabled:opacity-50',\n  'transition-colors',\n  className\n);\n---\n\n<button type=\"button\" class={classes} data-carousel-next aria-label=\"Next slide\" {...props}>\n  <slot>\n    <ChevronRight class=\"size-4\" />\n  </slot>\n</button>\n"
    },
    {
      "name": "CarouselPrevious.astro",
      "path": "carousel/CarouselPrevious.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\nimport ChevronLeft from '@lucide/astro/icons/chevron-left';\n\nexport interface Props extends HTMLAttributes<'button'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'absolute left-2 top-1/2 -translate-y-1/2 z-10',\n  'inline-flex size-8 items-center justify-center rounded-full',\n  'bg-background/80 backdrop-blur-sm border shadow-sm',\n  'hover:bg-accent hover:text-accent-foreground',\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring',\n  'disabled:pointer-events-none disabled:opacity-50',\n  'transition-colors',\n  className\n);\n---\n\n<button type=\"button\" class={classes} data-carousel-prev aria-label=\"Previous slide\" {...props}>\n  <slot>\n    <ChevronLeft class=\"size-4\" />\n  </slot>\n</button>\n"
    },
    {
      "name": "CarouselThumbnail.astro",
      "path": "carousel/CarouselThumbnail.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'button'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'overflow-hidden rounded-md border-2 border-transparent transition-colors',\n  'hover:border-muted-foreground/50',\n  'data-[active]:border-primary',\n  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring',\n  className\n);\n---\n\n<button type=\"button\" class={classes} data-carousel-thumbnail {...props}>\n  <slot />\n</button>\n"
    },
    {
      "name": "CarouselThumbnails.astro",
      "path": "carousel/CarouselThumbnails.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'flex items-center justify-center gap-2 mt-4',\n  className\n);\n---\n\n<div class={classes} data-carousel-thumbnails {...props}>\n  <slot />\n</div>\n\n<script>\n  function initCarouselThumbnails() {\n    document.querySelectorAll('[data-carousel-thumbnails]').forEach((container) => {\n      if (container.hasAttribute('data-thumbnails-initialized')) return;\n      container.setAttribute('data-thumbnails-initialized', 'true');\n\n      const carousel = container.closest('[data-carousel]');\n      if (!carousel) return;\n\n      const thumbnails = container.querySelectorAll('[data-carousel-thumbnail]');\n      \n      thumbnails.forEach((thumb, index) => {\n        thumb.addEventListener('click', () => {\n          const slider = (carousel as any).__keenSlider;\n          if (slider) {\n            slider.moveToIdx(index);\n          }\n        });\n      });\n\n      // Update active thumbnail on slide change\n      const content = carousel.querySelector('[data-carousel-content]');\n      if (content) {\n        const observer = new MutationObserver(() => {\n          const slider = (carousel as any).__keenSlider;\n          if (slider) {\n            const currentSlide = slider.track.details.rel;\n            thumbnails.forEach((thumb, index) => {\n              if (index === currentSlide) {\n                thumb.setAttribute('data-active', 'true');\n              } else {\n                thumb.removeAttribute('data-active');\n              }\n            });\n          }\n        });\n        observer.observe(content, { attributes: true, subtree: true });\n      }\n    });\n  }\n\n  initCarouselThumbnails();\n  document.addEventListener('astro:page-load', initCarouselThumbnails);\n</script>\n"
    }
  ]
}
