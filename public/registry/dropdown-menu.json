{
  "name": "dropdown-menu",
  "description": "A menu that appears when triggered by a button",
  "category": "navigation",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "focus-trap"
  ],
  "files": [
    {
      "name": "DropdownMenu.astro",
      "path": "dropdown-menu/DropdownMenu.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n---\n\n<div class={cn('relative inline-block text-left', className)} data-dropdown {...props}>\n  <slot />\n</div>\n\n<script>\n  import { generateId } from \"@/utils/focus-trap\";\n\n  function initDropdowns() {\n    document.querySelectorAll(\"[data-dropdown]\").forEach((dropdown) => {\n      if (dropdown.hasAttribute(\"data-initialized\")) return;\n      dropdown.setAttribute(\"data-initialized\", \"true\");\n\n      const trigger = dropdown.querySelector(\n        \"[data-dropdown-trigger]\",\n      ) as HTMLElement;\n      const content = dropdown.querySelector(\n        \"[data-dropdown-content]\",\n      ) as HTMLElement;\n\n      if (!trigger || !content) return;\n\n      // Generate ID for content\n      if (!content.id) {\n        content.id = generateId(\"dropdown-menu\");\n      }\n\n      // Set ARIA attributes\n      trigger.setAttribute(\"aria-haspopup\", \"true\");\n      trigger.setAttribute(\"aria-controls\", content.id);\n\n      const items = () =>\n        Array.from(\n          content.querySelectorAll(\"[data-dropdown-item]:not([disabled])\"),\n        ) as HTMLElement[];\n      let focusedIndex = -1;\n\n      const openDropdown = () => {\n        content.hidden = false;\n        trigger.setAttribute(\"aria-expanded\", \"true\");\n        trigger.setAttribute(\"data-state\", \"open\");\n\n        // Handle fixed positioning for side dropdowns (to escape overflow containers)\n        const side = content.dataset.side;\n        if (side === \"left\" || side === \"right\") {\n          const triggerRect = trigger.getBoundingClientRect();\n          content.style.position = \"fixed\";\n          content.style.top = `${triggerRect.top}px`;\n\n          if (side === \"left\") {\n            content.style.right = `${window.innerWidth - triggerRect.left + 8}px`;\n            content.style.left = \"auto\";\n          } else {\n            content.style.left = `${triggerRect.right + 8}px`;\n            content.style.right = \"auto\";\n          }\n        }\n\n        // Focus first item\n        const menuItems = items();\n        if (menuItems.length > 0) {\n          focusedIndex = 0;\n          menuItems[0].focus();\n        }\n      };\n\n      const closeDropdown = () => {\n        content.hidden = true;\n        trigger.setAttribute(\"aria-expanded\", \"false\");\n        trigger.setAttribute(\"data-state\", \"closed\");\n        focusedIndex = -1;\n\n        // Reset fixed positioning\n        const side = content.dataset.side;\n        if (side === \"left\" || side === \"right\") {\n          content.style.position = \"\";\n          content.style.top = \"\";\n          content.style.left = \"\";\n          content.style.right = \"\";\n        }\n\n        trigger.focus();\n      };\n\n      const toggleDropdown = () => {\n        if (content.hidden) {\n          openDropdown();\n        } else {\n          closeDropdown();\n        }\n      };\n\n      trigger.addEventListener(\"click\", toggleDropdown);\n\n      // Keyboard support for trigger\n      trigger.addEventListener(\"keydown\", (e) => {\n        const event = e as KeyboardEvent;\n        if (event.key === \"Enter\" || event.key === \" \") {\n          event.preventDefault();\n          toggleDropdown();\n        } else if (event.key === \"ArrowDown\" && content.hidden) {\n          event.preventDefault();\n          openDropdown();\n        }\n      });\n\n      // Arrow key navigation in menu\n      content.addEventListener(\"keydown\", (e) => {\n        const menuItems = items();\n        if (menuItems.length === 0) return;\n\n        switch (e.key) {\n          case \"ArrowDown\":\n            e.preventDefault();\n            focusedIndex = (focusedIndex + 1) % menuItems.length;\n            menuItems[focusedIndex].focus();\n            break;\n          case \"ArrowUp\":\n            e.preventDefault();\n            focusedIndex =\n              (focusedIndex - 1 + menuItems.length) % menuItems.length;\n            menuItems[focusedIndex].focus();\n            break;\n          case \"Home\":\n            e.preventDefault();\n            focusedIndex = 0;\n            menuItems[0].focus();\n            break;\n          case \"End\":\n            e.preventDefault();\n            focusedIndex = menuItems.length - 1;\n            menuItems[focusedIndex].focus();\n            break;\n          case \"Escape\":\n            e.preventDefault();\n            closeDropdown();\n            break;\n          case \"Tab\":\n            closeDropdown();\n            break;\n        }\n      });\n\n      // Close on click outside\n      document.addEventListener(\"click\", (e) => {\n        if (!dropdown.contains(e.target as Node) && !content.hidden) {\n          closeDropdown();\n        }\n      });\n\n      // Handle item clicks\n      content.querySelectorAll('[data-dropdown-item]').forEach((item) => {\n        item.addEventListener('click', () => {\n          closeDropdown();\n        });\n      });\n    });\n  }\n\n  initDropdowns();\n  document.addEventListener(\"astro:page-load\", initDropdowns);\n</script>\n"
    },
    {
      "name": "DropdownMenuContent.astro",
      "path": "dropdown-menu/DropdownMenuContent.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  align?: 'start' | 'center' | 'end';\n  side?: 'bottom' | 'left' | 'right';\n}\n\nconst {\n  align = 'end',\n  side = 'bottom',\n  class: className,\n  ...props\n} = Astro.props;\n\nconst alignStyles = {\n  start: 'left-0',\n  center: 'left-1/2 -translate-x-1/2',\n  end: 'right-0',\n};\n\nconst sideStyles = {\n  bottom: 'top-full mt-2',\n  left: 'right-full top-0 mr-2',\n  right: 'left-full top-0 ml-2',\n};\n\nconst classes = cn(\n  'absolute z-50 min-w-[8rem] overflow-hidden rounded-lg border bg-popover p-1 text-popover-foreground shadow-md',\n  side === 'bottom' ? alignStyles[align] : '',\n  sideStyles[side],\n  className\n);\n---\n\n<div class={classes} data-dropdown-content data-side={side} role=\"menu\" hidden {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "DropdownMenuItem.astro",
      "path": "dropdown-menu/DropdownMenuItem.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'button'> {\n  disabled?: boolean;\n  destructive?: boolean;\n}\n\nconst {\n  disabled = false,\n  destructive = false,\n  class: className,\n  ...props\n} = Astro.props;\n\nconst classes = cn(\n  'relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors',\n  'focus:bg-accent focus:text-accent-foreground',\n  'hover:bg-accent hover:text-accent-foreground',\n  disabled && 'pointer-events-none opacity-50',\n  destructive && 'text-destructive focus:text-destructive',\n  className\n);\n---\n\n<button\n  type=\"button\"\n  class={classes}\n  role=\"menuitem\"\n  disabled={disabled}\n  tabindex=\"-1\"\n  data-dropdown-item\n  {...props}\n>\n  <slot />\n</button>\n"
    },
    {
      "name": "DropdownMenuLabel.astro",
      "path": "dropdown-menu/DropdownMenuLabel.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('px-2 py-1.5 text-sm font-semibold', className);\n---\n\n<div class={classes} {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "DropdownMenuSeparator.astro",
      "path": "dropdown-menu/DropdownMenuSeparator.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('-mx-1 my-1 h-px bg-muted', className);\n---\n\n<div class={classes} role=\"separator\" {...props} />\n"
    },
    {
      "name": "DropdownMenuTrigger.astro",
      "path": "dropdown-menu/DropdownMenuTrigger.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'span'> {}\n\nconst { class: className, ...props } = Astro.props;\n---\n\n<span\n  role=\"button\"\n  tabindex=\"0\"\n  class={cn(\"inline-flex cursor-pointer\", className)}\n  data-dropdown-trigger\n  data-state=\"closed\"\n  aria-expanded=\"false\"\n  aria-haspopup=\"true\"\n  {...props}\n>\n  <slot />\n</span>\n"
    }
  ]
}
