{
  "name": "accordion",
  "description": "A vertically stacked set of interactive headings that reveal content",
  "category": "disclosure",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "focus-trap"
  ],
  "files": [
    {
      "name": "Accordion.astro",
      "path": "accordion/Accordion.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  type?: 'single' | 'multiple';\n}\n\nconst {\n  type = 'single',\n  class: className,\n  ...props\n} = Astro.props;\n\nconst classes = cn('w-full', className);\n---\n\n<div class={classes} data-accordion data-type={type} {...props}>\n  <slot />\n</div>\n\n<script>\n  import { generateId } from '@/utils/focus-trap';\n\n  function initAccordions() {\n    document.querySelectorAll('[data-accordion]').forEach((accordion) => {\n      if (accordion.hasAttribute('data-initialized')) return;\n      accordion.setAttribute('data-initialized', 'true');\n\n      const type = accordion.getAttribute('data-type');\n      \n      // Only select direct accordion items (not nested ones)\n      const items = Array.from(accordion.querySelectorAll('[data-accordion-item]')).filter(\n        (item) => item.closest('[data-accordion]') === accordion\n      );\n\n      items.forEach((item) => {\n        const trigger = item.querySelector(':scope > [data-accordion-trigger]') as HTMLElement;\n        const content = item.querySelector(':scope > [data-accordion-content]') as HTMLElement;\n\n        if (!trigger || !content) return;\n\n        // Generate IDs and set aria-controls\n        if (!content.id) {\n          content.id = generateId('accordion-content');\n        }\n        if (!trigger.id) {\n          trigger.id = generateId('accordion-trigger');\n        }\n\n        trigger.setAttribute('aria-controls', content.id);\n        content.setAttribute('aria-labelledby', trigger.id);\n      });\n\n      // Only select triggers that belong directly to this accordion\n      const triggers = Array.from(accordion.querySelectorAll('[data-accordion-trigger]')).filter(\n        (trigger) => trigger.closest('[data-accordion]') === accordion\n      ) as HTMLElement[];\n\n      triggers.forEach((trigger) => {\n        trigger.addEventListener('click', (e) => {\n          // Prevent event from bubbling to parent accordions\n          e.stopPropagation();\n          \n          const item = trigger.closest('[data-accordion-item]');\n          const content = item?.querySelector(':scope > [data-accordion-content]') as HTMLElement;\n          const isOpen = trigger.getAttribute('data-state') === 'open';\n\n          if (type === 'single') {\n            // Close all other items in THIS accordion only\n            triggers.forEach((t) => {\n              if (t !== trigger) {\n                t.setAttribute('data-state', 'closed');\n                t.setAttribute('aria-expanded', 'false');\n                const otherItem = t.closest('[data-accordion-item]');\n                const otherContent = otherItem?.querySelector(':scope > [data-accordion-content]') as HTMLElement;\n                if (otherContent) {\n                  otherContent.setAttribute('data-state', 'closed');\n                  otherContent.hidden = true;\n                }\n              }\n            });\n          }\n\n          // Toggle current item\n          const newState = isOpen ? 'closed' : 'open';\n          trigger.setAttribute('data-state', newState);\n          trigger.setAttribute('aria-expanded', String(!isOpen));\n\n          if (content) {\n            content.setAttribute('data-state', newState);\n            content.hidden = isOpen;\n          }\n        });\n      });\n    });\n  }\n\n  initAccordions();\n  document.addEventListener('astro:page-load', initAccordions);\n</script>\n"
    },
    {
      "name": "AccordionContent.astro",
      "path": "accordion/AccordionContent.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {\n  defaultOpen?: boolean;\n  id?: string;\n}\n\nconst { defaultOpen = false, class: className, id, ...props } = Astro.props;\n\nconst classes = cn(\n  \"overflow-hidden text-sm transition-all\",\n  className\n);\n---\n\n<div\n  class={classes}\n  data-accordion-content\n  data-state={defaultOpen ? \"open\" : \"closed\"}\n  role=\"region\"\n  id={id}\n  hidden={!defaultOpen}\n  {...props}\n>\n  <div class=\"pb-4 pt-0\">\n    <slot />\n  </div>\n</div>\n"
    },
    {
      "name": "AccordionItem.astro",
      "path": "accordion/AccordionItem.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  value: string;\n}\n\nconst {\n  value,\n  class: className,\n  ...props\n} = Astro.props;\n\nconst classes = cn('border-b', className);\n---\n\n<div class={classes} data-accordion-item data-value={value} {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "AccordionTrigger.astro",
      "path": "accordion/AccordionTrigger.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\nimport ChevronDown from \"@lucide/astro/icons/chevron-down\";\n\nexport interface Props extends HTMLAttributes<\"button\"> {\n  defaultOpen?: boolean;\n}\n\nconst { defaultOpen = false, class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"flex w-full flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n  className\n);\n---\n\n<button\n  type=\"button\"\n  class={classes}\n  data-accordion-trigger\n  data-state={defaultOpen ? \"open\" : \"closed\"}\n  aria-expanded={defaultOpen}\n  {...props}\n>\n  <slot />\n  <ChevronDown size={16} class=\"shrink-0 transition-transform duration-200\" />\n</button>\n"
    }
  ]
}
