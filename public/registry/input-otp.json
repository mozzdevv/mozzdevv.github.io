{
  "name": "input-otp",
  "description": "A one-time password input",
  "category": "form",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "name": "InputOTP.astro",
      "path": "input-otp/InputOTP.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {\n  /**\n   * Maximum length of the OTP (number of slots)\n   */\n  maxLength: number;\n  /**\n   * Pattern to validate input (default: digits only)\n   * Use \"digits\" for numbers only, \"alphanumeric\" for letters and numbers, or provide a custom regex\n   */\n  pattern?: \"digits\" | \"alphanumeric\" | string;\n  /**\n   * Whether the input is disabled\n   */\n  disabled?: boolean;\n  /**\n   * Initial value\n   */\n  value?: string;\n  /**\n   * Name attribute for form submission\n   */\n  name?: string;\n}\n\nconst {\n  maxLength,\n  pattern = \"digits\",\n  disabled = false,\n  value = \"\",\n  name,\n  class: className,\n  ...props\n} = Astro.props;\n\n// Convert pattern shortcuts to regex\nconst getPatternRegex = (p: string) => {\n  if (p === \"digits\") return \"^[0-9]*$\";\n  if (p === \"alphanumeric\") return \"^[a-zA-Z0-9]*$\";\n  return p;\n};\n\nconst patternRegex = getPatternRegex(pattern);\n\nconst classes = cn(\n  \"flex items-center gap-2\",\n  disabled && \"opacity-50 cursor-not-allowed\",\n  className\n);\n---\n\n<div\n  class={classes}\n  data-input-otp\n  data-max-length={maxLength}\n  data-pattern={patternRegex}\n  data-disabled={disabled ? \"true\" : undefined}\n  role=\"group\"\n  aria-label=\"One-time password input\"\n  {...props}\n>\n  <slot />\n  {name && (\n    <input\n      type=\"hidden\"\n      name={name}\n      value={value}\n      data-otp-hidden-input\n    />\n  )}\n</div>\n\n<script>\n  function initInputOTP() {\n    document.querySelectorAll('[data-input-otp]').forEach((container) => {\n      if (container.hasAttribute('data-otp-initialized')) return;\n      container.setAttribute('data-otp-initialized', 'true');\n\n      const slots = container.querySelectorAll('[data-otp-slot]') as NodeListOf<HTMLInputElement>;\n      const hiddenInput = container.querySelector('[data-otp-hidden-input]') as HTMLInputElement | null;\n      const pattern = new RegExp(container.getAttribute('data-pattern') || '^[0-9]*$');\n      const isDisabled = container.hasAttribute('data-disabled');\n\n      if (isDisabled) {\n        slots.forEach(slot => {\n          slot.disabled = true;\n        });\n        return;\n      }\n\n      // Update hidden input with combined value\n      const updateHiddenInput = () => {\n        if (hiddenInput) {\n          const value = Array.from(slots).map(s => s.value).join('');\n          hiddenInput.value = value;\n        }\n      };\n\n      // Focus management\n      const focusSlot = (index: number) => {\n        if (index >= 0 && index < slots.length) {\n          slots[index].focus();\n          slots[index].select();\n        }\n      };\n\n      slots.forEach((slot, index) => {\n        // Handle input\n        slot.addEventListener('input', (e) => {\n          const input = e.target as HTMLInputElement;\n          let value = input.value;\n\n          // Validate against pattern\n          if (value && !pattern.test(value)) {\n            input.value = '';\n            return;\n          }\n\n          // Take only first character\n          if (value.length > 1) {\n            value = value[0];\n            input.value = value;\n          }\n\n          // Update state\n          if (value) {\n            slot.setAttribute('data-filled', 'true');\n          } else {\n            slot.removeAttribute('data-filled');\n          }\n\n          updateHiddenInput();\n\n          // Auto-advance to next slot\n          if (value && index < slots.length - 1) {\n            focusSlot(index + 1);\n          }\n        });\n\n        // Handle keydown for navigation\n        slot.addEventListener('keydown', (e) => {\n          const key = e.key;\n\n          if (key === 'Backspace') {\n            if (!slot.value && index > 0) {\n              e.preventDefault();\n              focusSlot(index - 1);\n              slots[index - 1].value = '';\n              slots[index - 1].removeAttribute('data-filled');\n              updateHiddenInput();\n            } else {\n              slot.removeAttribute('data-filled');\n            }\n          } else if (key === 'ArrowLeft' && index > 0) {\n            e.preventDefault();\n            focusSlot(index - 1);\n          } else if (key === 'ArrowRight' && index < slots.length - 1) {\n            e.preventDefault();\n            focusSlot(index + 1);\n          } else if (key === 'Delete') {\n            slot.value = '';\n            slot.removeAttribute('data-filled');\n            updateHiddenInput();\n          }\n        });\n\n        // Handle paste\n        slot.addEventListener('paste', (e) => {\n          e.preventDefault();\n          const pasteData = e.clipboardData?.getData('text') || '';\n          \n          // Validate pasted content\n          if (!pattern.test(pasteData)) return;\n\n          // Distribute pasted characters across slots starting from current\n          const chars = pasteData.split('');\n          let currentIndex = index;\n          \n          chars.forEach((char) => {\n            if (currentIndex < slots.length && pattern.test(char)) {\n              slots[currentIndex].value = char;\n              slots[currentIndex].setAttribute('data-filled', 'true');\n              currentIndex++;\n            }\n          });\n\n          updateHiddenInput();\n\n          // Focus the next empty slot or last filled slot\n          const nextEmpty = Array.from(slots).findIndex(s => !s.value);\n          focusSlot(nextEmpty === -1 ? slots.length - 1 : nextEmpty);\n        });\n\n        // Handle focus\n        slot.addEventListener('focus', () => {\n          slot.select();\n          container.setAttribute('data-focused', 'true');\n        });\n\n        slot.addEventListener('blur', () => {\n          // Check if focus moved outside the container\n          setTimeout(() => {\n            const activeElement = document.activeElement;\n            const isStillInContainer = Array.from(slots).includes(activeElement as HTMLInputElement);\n            if (!isStillInContainer) {\n              container.removeAttribute('data-focused');\n            }\n          }, 0);\n        });\n      });\n\n      // Set initial values if provided\n      const initialValue = hiddenInput?.value || '';\n      if (initialValue) {\n        initialValue.split('').forEach((char, i) => {\n          if (i < slots.length) {\n            slots[i].value = char;\n            slots[i].setAttribute('data-filled', 'true');\n          }\n        });\n      }\n    });\n  }\n\n  // Initialize on load\n  initInputOTP();\n\n  // Re-initialize on page navigation (for Astro view transitions)\n  document.addEventListener('astro:page-load', initInputOTP);\n</script>\n"
    },
    {
      "name": "InputOTPGroup.astro",
      "path": "input-otp/InputOTPGroup.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"flex items-center\",\n  className\n);\n---\n\n<div\n  class={classes}\n  data-otp-group\n  role=\"group\"\n  {...props}\n>\n  <slot />\n</div>\n\n<style is:global>\n  /* Connected slots within a group */\n  [data-otp-group] > [data-otp-slot-wrapper]:not(:first-child):not(:last-child) [data-otp-slot] {\n    border-radius: 0;\n  }\n\n  [data-otp-group] > [data-otp-slot-wrapper]:first-child [data-otp-slot] {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  [data-otp-group] > [data-otp-slot-wrapper]:last-child [data-otp-slot] {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  [data-otp-group] > [data-otp-slot-wrapper]:not(:first-child) [data-otp-slot] {\n    margin-left: -1px;\n  }\n</style>\n"
    },
    {
      "name": "InputOTPSeparator.astro",
      "path": "input-otp/InputOTPSeparator.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\nimport Dot from \"@lucide/astro/icons/dot\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"flex items-center justify-center text-muted-foreground\",\n  className\n);\n---\n\n<div\n  class={classes}\n  role=\"separator\"\n  aria-orientation=\"vertical\"\n  data-otp-separator\n  {...props}\n>\n  <slot>\n    <Dot class=\"size-4\" />\n  </slot>\n</div>\n"
    },
    {
      "name": "InputOTPSlot.astro",
      "path": "input-otp/InputOTPSlot.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends Omit<HTMLAttributes<\"input\">, \"type\"> {\n  /**\n   * Index of the slot (0-based)\n   */\n  index: number;\n  /**\n   * Whether to show an invalid state\n   */\n  invalid?: boolean;\n}\n\nconst {\n  index,\n  invalid = false,\n  class: className,\n  ...props\n} = Astro.props;\n\nconst classes = cn(\n  \"relative w-10 h-12 text-center text-lg font-medium\",\n  \"bg-background border border-input rounded-md\",\n  \"transition-all duration-150\",\n  \"focus:z-10 focus:border-primary focus:ring-[3px] focus:ring-primary/10 focus:outline-none\",\n  \"disabled:cursor-not-allowed disabled:opacity-50\",\n  invalid && \"border-destructive focus:border-destructive focus:ring-destructive/10\",\n  className\n);\n---\n\n<div data-otp-slot-wrapper class=\"relative\">\n  <input\n    type=\"text\"\n    inputmode=\"numeric\"\n    autocomplete=\"one-time-code\"\n    maxlength=\"1\"\n    class={classes}\n    data-otp-slot\n    data-otp-index={index}\n    aria-label={`Digit ${index + 1}`}\n    aria-invalid={invalid ? \"true\" : undefined}\n    {...props}\n  />\n  <div\n    class=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 data-[active]:opacity-100\"\n    data-otp-caret\n  >\n    <div class=\"w-px h-6 bg-foreground animate-pulse\"></div>\n  </div>\n</div>\n\n<style>\n  /* Show caret when slot is focused and empty */\n  [data-otp-slot-wrapper]:has([data-otp-slot]:focus:placeholder-shown) [data-otp-caret] {\n    opacity: 1;\n  }\n\n  /* Hide caret when slot has value */\n  [data-otp-slot-wrapper]:has([data-otp-slot][data-filled]) [data-otp-caret] {\n    opacity: 0;\n  }\n</style>\n"
    }
  ]
}
