{
  "name": "combobox",
  "description": "A searchable dropdown for selecting one option",
  "category": "form",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "command",
    "popover"
  ],
  "files": [
    {
      "name": "Combobox.astro",
      "path": "combobox/Combobox.astro",
      "content": "---\nimport ComboboxContent from \"@/components/ui/combobox/ComboboxContent.astro\";\nimport ComboboxItem from \"@/components/ui/combobox/ComboboxItem.astro\";\nimport ComboboxTrigger from \"@/components/ui/combobox/ComboboxTrigger.astro\";\nimport X from \"@/components/fundations/icons/X.astro\";\nimport CommandEmpty from \"@/components/ui/command/CommandEmpty.astro\";\nimport CommandGroup from \"@/components/ui/command/CommandGroup.astro\";\nimport CommandList from \"@/components/ui/command/CommandList.astro\";\nimport CommandSeparator from \"@/components/ui/command/CommandSeparator.astro\";\nimport Popover from \"@/components/ui/popover/Popover.astro\";\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\ntype ComboboxOption = {\n  value: string;\n  label: string;\n  description?: string;\n  meta?: string;\n  disabled?: boolean;\n};\n\ntype ComboboxGroup = {\n  heading?: string;\n  options: ComboboxOption[];\n};\n\nexport interface Props extends HTMLAttributes<\"div\"> {\n  options: ComboboxOption[] | ComboboxGroup[];\n  value?: string;\n  name?: string;\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyMessage?: string;\n  disabled?: boolean;\n  clearable?: boolean;\n  inputGroupControl?: boolean;\n}\n\nconst {\n  options = [],\n  value = \"\",\n  id,\n  name,\n  placeholder = \"Select an option\",\n  searchPlaceholder = \"Search...\",\n  emptyMessage = \"No results found.\",\n  disabled = false,\n  clearable = false,\n  inputGroupControl = false,\n  class: className,\n  ...props\n} = Astro.props;\n\nconst isGrouped =\n  Array.isArray(options) &&\n  options.length > 0 &&\n  typeof options[0] === \"object\" &&\n  \"options\" in options[0];\n\nconst normalizedGroups = (isGrouped\n  ? (options as ComboboxGroup[])\n  : [{ options: options as ComboboxOption[] }]) as ComboboxGroup[];\n\nconst selectedOption = normalizedGroups\n  .flatMap((group) => group.options)\n  .find((option) => option.value === value);\n---\n\n<Popover\n  class={cn(\"w-full\", className)}\n  data-combobox\n  data-combobox-value={value}\n  data-combobox-placeholder={placeholder}\n  data-combobox-disabled={disabled ? \"true\" : \"false\"}\n  data-combobox-clearable={clearable ? \"true\" : \"false\"}\n  {...props}\n>\n  <ComboboxTrigger\n    id={id}\n    placeholder={selectedOption?.label || placeholder}\n    disabled={disabled}\n    inputGroupControl={inputGroupControl}\n  >\n    {clearable && !disabled && (\n      <span\n        slot=\"clear-icon\"\n        class={cn(\n          \"inline-flex items-center justify-center rounded-sm p-1 text-muted-foreground transition-colors hover:text-foreground\",\n          !selectedOption && \"hidden\"\n        )}\n        data-combobox-clear\n        role=\"button\"\n        tabindex=\"0\"\n        aria-label=\"Clear selection\"\n      >\n        <X size=\"sm\" />\n      </span>\n    )}\n  </ComboboxTrigger>\n  <ComboboxContent>\n    <div class=\"border-b px-3 py-2\">\n      <input\n        type=\"text\"\n        data-command-input\n        role=\"combobox\"\n        aria-expanded=\"true\"\n        aria-autocomplete=\"list\"\n        aria-haspopup=\"listbox\"\n        autocomplete=\"off\"\n        autocorrect=\"off\"\n        spellcheck=\"false\"\n        class=\"flex h-9 w-full border-0 bg-transparent px-0 text-sm outline-none focus:ring-0 placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\"\n        placeholder={searchPlaceholder}\n      />\n    </div>\n    <CommandList>\n      <CommandEmpty>{emptyMessage}</CommandEmpty>\n      {\n        normalizedGroups.map((group, groupIndex) => (\n          <>\n            <CommandGroup heading={group.heading}>\n              {group.options.map((option) => (\n                <ComboboxItem\n                  value={option.value}\n                  label={option.label}\n                  description={option.description}\n                  meta={option.meta}\n                  disabled={option.disabled}\n                />\n              ))}\n            </CommandGroup>\n            {groupIndex < normalizedGroups.length - 1 && (\n              <CommandSeparator data-combobox-group-separator />\n            )}\n          </>\n        ))\n      }\n    </CommandList>\n  </ComboboxContent>\n  {name && <input type=\"hidden\" name={name} value={value} data-combobox-input />}\n</Popover>\n\n<script>\n  import { ensureUiBootLoaded } from \"@/utils/runtime/loader\";\n\n  ensureUiBootLoaded();\n</script>\n"
    },
    {
      "name": "ComboboxContent.astro",
      "path": "combobox/ComboboxContent.astro",
      "content": "---\nimport Command from \"@/components/ui/command/Command.astro\";\nimport PopoverContent from \"@/components/ui/popover/PopoverContent.astro\";\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {\n  align?: \"start\" | \"center\" | \"end\";\n  side?: \"top\" | \"right\" | \"bottom\" | \"left\";\n}\n\nconst {\n  align = \"start\",\n  side = \"bottom\",\n  class: className,\n  ...props\n} = Astro.props;\n---\n\n<PopoverContent\n  align={align}\n  side={side}\n  class={cn(\"w-full min-w-[220px] p-0\", className)}\n  {...props}\n>\n  <Command class=\"rounded-md border-0 shadow-none\">\n    <slot />\n  </Command>\n</PopoverContent>\n"
    },
    {
      "name": "ComboboxItem.astro",
      "path": "combobox/ComboboxItem.astro",
      "content": "---\nimport CommandItem from \"@/components/ui/command/CommandItem.astro\";\nimport Check from \"@/components/fundations/icons/Check.astro\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {\n  value: string;\n  label?: string;\n  description?: string;\n  meta?: string;\n  disabled?: boolean;\n}\n\nconst {\n  value,\n  label,\n  description,\n  meta,\n  disabled = false,\n  class: className,\n  ...props\n} = Astro.props;\n---\n\n<CommandItem\n  value={value}\n  disabled={disabled}\n  class={className}\n  data-combobox-item\n  data-label={label}\n  {...props}\n>\n  <slot name=\"leading\" />\n  <div class=\"flex min-w-0 flex-1 flex-col\">\n    <span class=\"truncate\">{label || <slot />}</span>\n    {description && (\n      <span class=\"truncate text-sm text-muted-foreground\">{description}</span>\n    )}\n  </div>\n  {meta && <span class=\"text-xs text-muted-foreground\">{meta}</span>}\n  <slot name=\"trailing\" />\n  <Check\n    size=\"sm\"\n    class=\"text-current opacity-0 transition-opacity\"\n    data-combobox-item-indicator\n    aria-hidden=\"true\"\n  />\n</CommandItem>\n"
    },
    {
      "name": "ComboboxTrigger.astro",
      "path": "combobox/ComboboxTrigger.astro",
      "content": "---\nimport PopoverTrigger from \"@/components/ui/popover/PopoverTrigger.astro\";\nimport ChevronDown from \"@/components/fundations/icons/ChevronDown.astro\";\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"button\"> {\n  placeholder?: string;\n  disabled?: boolean;\n  inputGroupControl?: boolean;\n}\n\nconst {\n  placeholder = \"Select an option\",\n  disabled = false,\n  inputGroupControl = false,\n  class: className,\n  ...props\n} = Astro.props;\n---\n\n<PopoverTrigger class=\"w-full\">\n  <button\n    type=\"button\"\n    class={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border bg-background px-3 py-2 text-sm\",\n      \"border-input focus:ring-ring\",\n      \"ring-offset-background placeholder:text-muted-foreground\",\n      \"focus:outline-none focus:ring-2 focus:ring-offset-2\",\n      \"disabled:cursor-not-allowed disabled:opacity-50\",\n      inputGroupControl &&\n        \"rounded-none border-0 bg-transparent px-3 focus:ring-0 focus:ring-offset-0\",\n      className\n    )}\n    data-combobox-trigger\n    data-slot={inputGroupControl ? \"input-group-control\" : undefined}\n    disabled={disabled}\n    {...props}\n  >\n    <span class=\"truncate text-left\" data-combobox-value>{placeholder}</span>\n    <div class=\"flex items-center gap-1\">\n      <slot name=\"clear-icon\" />\n      <slot name=\"right-icon\">\n        <ChevronDown\n          size=\"sm\"\n          class=\"text-muted-foreground\"\n          data-combobox-chevron\n          aria-hidden=\"true\"\n        />\n      </slot>\n    </div>\n  </button>\n</PopoverTrigger>\n"
    }
  ]
}
